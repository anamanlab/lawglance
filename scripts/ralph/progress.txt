# Ralph Progress Log
Started: 2026-02-23

## Codebase Patterns
- Run `make quality` before each commit.
- Keep architecture docs in sync when changing API contracts or runtime behavior.
- Canada-only legal scope is mandatory; avoid India-domain terms outside legacy archival files.

---
## 2026-02-23 17:23:51 -03 - US-001
- Implemented a dedicated India-domain leak scanner script with Canada-scope defaults, explicit allowlist handling, and non-zero exit on violations with file/line output.
- Files changed: scripts/scan_domain_leaks.py, tests/test_domain_leak_scanner.py, scripts/ralph/prd.json, scripts/ralph/progress.txt.
- Learnings for future iterations:
  - Reusable pattern: Keep scanner logic testable via a `main(argv)` entrypoint plus pure scanning helpers.
  - Gotcha: `importlib`-loaded test modules that use `@dataclass` must be added to `sys.modules` before `exec_module`.
  - Useful context: Current repo has approved India-term references in migration-history docs and jurisdiction-evaluation modules, so explicit path allowlisting is required.
---
## 2026-02-23 17:26:24 -0300 - US-002
- Integrated the Canada domain-leak scanner into local quality gates and CI quality workflow enforcement.
- Files changed: Makefile, .github/workflows/quality-gates.yml, scripts/ralph/prd.json, scripts/ralph/progress.txt.
- Learnings for future iterations:
  - Reusable pattern: Add policy scanners as dedicated Make targets and invoke the same script path in CI for parity.
  - Gotcha: `make` may be unavailable in some environments, so run equivalent target commands directly to preserve gate coverage.
  - Useful context: Quality gates now include domain leakage checks before jurisdiction evaluation and suite artifacts are generated.
---
